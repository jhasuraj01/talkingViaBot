<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Forward to friends</title>
</head>

<body>
    <label for="url-in">
        <input type="text" name="url-in" id="url-in" style="position: absolute; top: 0; left: 0; display: none;">
    </label>
    <label for="username-in">
        <input type="text" name="username-in" id="username-in" placeholder="Write your name">
    </label>
    <label for="friendname-in">
        <input type="text" name="friendname-in" id="friendname-in" placeholder="Write nick name of your friend">
    </label>
    <button id="copyURL-btn">COPY URL</button>

    <script src="../encrypt.js"></script>
    <script>
        let url_in = document.getElementById('url-in');
        let friendname_in = document.getElementById('friendname-in');
        let username_in = document.getElementById('username-in');

        let copyURLFn = () => {
            /* encrypt Your Name */
            let username_encryption_key = username_in.value.length % 26 > 3 ? username_in.value.length : 10;
            let encrypted_username = encrypt(username_in.value, username_encryption_key);

            /* encrypt friends name */
            let friendname_encryption_key = friendname_in.value.length % 26 > 3 ? friendname_in.value.length : 10;
            let encrypted_friendname = encrypt(friendname_in.value, friendname_encryption_key);

            let url = new URL(`https://the-suraj.github.io/talkingViaBot/?fn=${encrypted_username}&un=${encrypted_friendname}`);
            url_in.value = url;
            url_in.style.display = "block";
            url_in.select();
            document.execCommand('copy');
            url_in.style.display = "none";
            return null;
        }
        document.getElementById("copyURL-btn").addEventListener("click", copyURLFn);
    </script>
</body>

</html>